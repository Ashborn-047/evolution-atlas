import{r as l,j as d}from"./client-jcPAbkVI.js";function D({squareSize:t=4,gridGap:h=6,flickerChance:p=.3,color:w="rgb(0, 0, 0)",width:v,height:y,maxOpacity:m=.3,style:A}){const k=l.useRef(null),R=l.useRef(null),[x,$]=l.useState(!1),[j,M]=l.useState({width:0,height:0}),C=l.useMemo(()=>(r=>{if(typeof window>"u")return"rgba(0, 0, 0,";const n=document.createElement("canvas");n.width=n.height=1;const i=n.getContext("2d");if(!i)return"rgba(255, 0, 0,";i.fillStyle=r,i.fillRect(0,0,1,1);const[s,c,o]=Array.from(i.getImageData(0,0,1,1).data);return`rgba(${s}, ${c}, ${o},`})(w),[w]),F=l.useCallback((e,r,n)=>{const i=window.devicePixelRatio||1;e.width=r*i,e.height=n*i,e.style.width=`${r}px`,e.style.height=`${n}px`;const s=Math.ceil(r/(t+h))+1,c=Math.ceil(n/(t+h))+1,o=new Float32Array(s*c);for(let a=0;a<o.length;a++)o[a]=Math.random()*m;return{cols:s,rows:c,squares:o,dpr:i}},[t,h,m]),I=l.useCallback((e,r)=>{for(let n=0;n<e.length;n++)Math.random()<p*r&&(e[n]=Math.random()*m)},[p,m]),S=l.useCallback((e,r,n,i,s,c,o)=>{e.clearRect(0,0,r,n),e.fillStyle="transparent",e.fillRect(0,0,r,n);for(let a=0;a<i;a++)for(let f=0;f<s;f++){const g=c[a*s+f];e.fillStyle=`${C}${g})`,e.fillRect(a*(t+h)*o,f*(t+h)*o,t*o,t*o)}},[C,t,h]);return l.useEffect(()=>{const e=k.current,r=R.current;if(!e||!r)return;const n=e.getContext("2d");if(!n)return;let i,s;const c=()=>{const u=v||r.clientWidth,b=y||r.clientHeight;M({width:u,height:b}),s=F(e,u,b)};c();let o=0;const a=u=>{if(!x)return;const b=(u-o)/1e3;o=u,I(s.squares,b),S(n,e.width,e.height,s.cols,s.rows,s.squares,s.dpr),i=requestAnimationFrame(a)},f=new ResizeObserver(()=>{c()});f.observe(r);const g=new IntersectionObserver(([u])=>{$(u.isIntersecting)},{threshold:0});return g.observe(e),x&&(i=requestAnimationFrame(a)),()=>{cancelAnimationFrame(i),f.disconnect(),g.disconnect()}},[F,I,S,v,y,x]),d.jsx("div",{ref:R,style:{width:"100%",height:"100%",...A},children:d.jsx("canvas",{ref:k,style:{width:j.width,height:j.height,pointerEvents:"none"}})})}function W(){const[t,h]=l.useState(!0);return d.jsxs("div",{style:{minHeight:"100vh",background:t?"#0a0a0a":"#f9fafb",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem",transition:"background 0.3s ease",fontFamily:"system-ui, -apple-system, sans-serif"},children:[d.jsx("button",{onClick:()=>h(!t),style:{marginBottom:"2rem",padding:"0.5rem 1rem",borderRadius:"9999px",border:`1px solid ${t?"#404040":"#e5e7eb"}`,background:t?"#171717":"white",color:t?"#f3f4f6":"#111827",fontSize:"0.875rem",fontWeight:500,cursor:"pointer",transition:"all 0.2s ease"},children:t?"‚òÄÔ∏è Switch to Light Mode":"üåô Switch to Dark Mode"}),d.jsx("div",{style:{position:"relative",height:"350px",width:"100%",maxWidth:"56rem",borderRadius:"0.75rem",background:t?"#171717":"white",overflow:"hidden",border:`1px solid ${t?"#262626":"#e5e7eb"}`,boxShadow:"0 1px 3px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:d.jsx(D,{style:{position:"absolute",inset:0,zIndex:0},squareSize:4,gridGap:6,color:t?"rgb(255, 255, 255)":"#6B7280",maxOpacity:.5,flickerChance:.1})}),d.jsxs("div",{style:{marginTop:"1.5rem",textAlign:"center",maxWidth:"32rem"},children:[d.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:700,letterSpacing:"-0.025em",color:t?"white":"#111827",transition:"color 0.3s ease"},children:"Flickering Grid"}),d.jsx("p",{style:{color:t?"#a3a3a3":"#6b7280",marginTop:"0.5rem",transition:"color 0.3s ease",lineHeight:1.6},children:"A randomized grid pattern that flickers with varied opacity, perfect for adding subtle texture to backgrounds."})]})]})}export{D as FlickeringGrid,D as FlickeringGridEffect,W as default};
